/* 1. Font Face */
@font-face { font-family: 'Miracode'; src: url('./fonts/Miracode.woff2') format('woff2'); font-weight: 100 700; font-display: swap; }

/* 2. Root Tokens */
:root {
  --font-base: 'Miracode', ui-monospace, SFMono-Regular, Consolas, 'Liberation Mono', monospace;
  --font-size-0: 0.75rem;
  --font-size-1: 0.875rem;
  --font-size-2: 1rem;
  --font-size-3: 1.25rem;
  --font-size-4: 1.6rem;
  --font-size-5: clamp(1.9rem, 3vw, 2.6rem);

  --space-1: 2px; --space-2: 4px; --space-3: 8px; --space-4: 12px; --space-5: 16px; --space-6: 24px; --space-7: 32px; --space-8: 48px;
  --radius-xs: 2px; --radius-sm: 4px; --radius-md: 8px; --radius-lg: 16px;
  --easing-standard: cubic-bezier(.4,.1,.2,1);
  --dur-fast: 70ms; --dur: 140ms; --dur-slow: 280ms;

  --layer-base: 0; --layer-overlay: 10; --layer-toast: 20; --layer-modal: 30;

  /* Light theme colors */
  --c-bg: #f9f9fb; --c-bg-alt: #ffffff; --c-bg-elev: #ffffff;
  --c-border: #d9dbe0; --c-border-strong: #b5b8be;
  --c-text: #1e2330; --c-text-dim: #5a6172; --c-text-faint: #8a91a2;
  --c-accent: #3a6ad9; --c-accent-hover: #305dc3; --c-accent-soft: #e2ecfb;
  --c-danger: #d9303a; --c-warn: #d97f00; --c-ok: #179c55; --c-info: #1476d9;
  --c-shadow: 32 38 55;

  color-scheme: light dark;
}

[data-theme="dark"] {
  --c-bg: #0c0f17; --c-bg-alt: #121622; --c-bg-elev: #1b2232;
  --c-border: #2a3142; --c-border-strong: #3a4558;
  --c-text: #f2f6ff; --c-text-dim: #b1b9c9; --c-text-faint: #7a8395;
  --c-accent: #5c8dff; --c-accent-hover: #4d7adf; --c-accent-soft: #1e335b;
  --c-danger: #ff5f67; --c-warn: #ffb347; --c-ok: #29d07d; --c-info: #4aa8ff;
  --c-shadow: 0 0 0;
}

/* 3. Reset & Base */
* { box-sizing: border-box; }
html,body { margin:0; padding:0; font-family: var(--font-base); background: var(--c-bg); color: var(--c-text); -webkit-font-smoothing: antialiased; }
body { min-height: 100dvh; display:flex; }
img,svg,video { max-width:100%; height:auto; display:block; }
a { color: var(--c-accent); text-decoration: none; }
a:hover { text-decoration: underline; }
:focus-visible { outline:2px solid var(--c-accent); outline-offset:2px; }

h1,h2,h3,h4 { font-weight:600; line-height:1.15; margin:0 0 var(--space-4); }
h1 { font-size: var(--font-size-5); }
h2 { font-size: var(--font-size-4); }
h3 { font-size: var(--font-size-3); }

p { margin:0 0 var(--space-4); line-height:1.4; }

/* 4. Layout Shell */
.layout-shell { display:grid; grid-template-columns: 250px 1fr; width:100%; min-height:100dvh; }
@media (max-width: 840px) { .layout-shell { grid-template-columns: 1fr; } nav.nav { position:sticky; top:0; z-index:var(--layer-overlay); display:flex; flex-wrap:wrap; } }

.main { padding: var(--space-6) var(--space-6) var(--space-8); display:flex; flex-direction:column; gap:var(--space-6); }

/* 5. Navigation */
.nav { background: var(--c-bg-alt); border-right:1px solid var(--c-border); display:flex; flex-direction:column; padding: var(--space-6) var(--space-5); gap:var(--space-6); }
.nav-brand { font-weight:600; font-size: var(--font-size-2); letter-spacing: .5px; }
.nav-toggle { display:none; }
@media (max-width: 840px){ .nav-toggle { display:inline-flex; margin-left:auto; background:none; border:1px solid var(--c-border); padding: var(--space-2) var(--space-3); border-radius: var(--radius-sm); cursor:pointer; } }
.nav-items { list-style:none; margin:0; padding:0; display:flex; flex-direction:column; gap:2px; }
.nav-items a, .nav-items .nav-link { padding: var(--space-3) var(--space-4); border-radius: var(--radius-sm); display:block; color:var(--c-text-dim); font-size: var(--font-size-2); background:none; border:none; text-align:left; width:100%; font-family:inherit; cursor:pointer; }
.nav-items a:hover, .nav-items .nav-link:hover { background: var(--c-accent-soft); color:var(--c-accent); text-decoration:none; }
.nav-items a.is-active, .nav-items .nav-link.is-active { background: var(--c-accent); color:#fff; }

/* Mobile nav toggle overrides (placed after base styles to win cascade) */
@media (max-width: 840px) {
  .nav-items { display:none; width:100%; flex-direction:column; gap:2px; }
  .nav-items.is-open { display:flex; }
}

/* Compact mobile nav bar adjustments */
@media (max-width: 840px) {
  nav.nav { --nav-mobile-h: 56px; position:fixed; top:0; left:0; right:0; height:var(--nav-mobile-h); flex-direction: row; align-items: center; flex-wrap: nowrap; gap: var(--space-4); padding: 8px 14px; border-right: none; border-bottom:1px solid var(--c-border); background: var(--c-bg-alt); }
  .nav-foot { margin-top:0; margin-left:auto; }
  .nav-items { position:absolute; top:100%; left:0; right:0; background: var(--c-bg-alt); padding: var(--space-4) var(--space-4) var(--space-5); border-bottom:1px solid var(--c-border); box-shadow:0 6px 22px -8px rgba(var(--c-shadow) / 0.4); z-index: var(--layer-overlay); }
  .nav-items .nav-link { width:100%; }
  .main { padding-top: calc(var(--nav-mobile-h) + var(--space-6)); }
}
.nav-foot { margin-top:auto; display:flex; gap:var(--space-3); }

/* 6. Buttons */
.btn { font-family:inherit; font-size: var(--font-size-2); padding: var(--space-3) var(--space-5); border-radius: var(--radius-sm); border:1px solid var(--c-border); background: var(--c-bg-alt); color:var(--c-text); cursor:pointer; transition: background var(--dur) var(--easing-standard), border-color var(--dur) var(--easing-standard); }
.btn:hover { background: var(--c-accent-soft); }
.btn:active { transform:translateY(1px); }
.btn-primary { background: var(--c-accent); color:#fff; border-color: var(--c-accent); }
.btn-primary:hover { background: var(--c-accent-hover); }
.btn-ghost { background: transparent; border-color: var(--c-border); }
.btn-ghost:hover { background: var(--c-accent-soft); }

/* 7. Cards & Panels */
.card { background: var(--c-bg-elev); border:1px solid var(--c-border); border-radius: var(--radius-md); padding: var(--space-6); display:flex; flex-direction:column; gap:var(--space-4); position:relative; }
.card-header { font-size: var(--font-size-2); font-weight:600; display:flex; align-items:center; justify-content:space-between; }
.card-grid { display:grid; gap:var(--space-6); grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); }

/* 8. Status widgets */
.stat { display:flex; flex-direction:column; gap:var(--space-2); padding: var(--space-4); border:1px solid var(--c-border); border-radius: var(--radius-sm); background: var(--c-bg-alt); min-width:120px; }
.stat-label { font-size: var(--font-size-0); text-transform:uppercase; letter-spacing:.5px; color: var(--c-text-faint); }
.stat-value { font-size: var(--font-size-3); font-weight:500; }

/* 9. Tables */
.table-wrap { overflow:auto; border:1px solid var(--c-border); border-radius: var(--radius-sm); }
.table { width:100%; border-collapse:collapse; font-size: var(--font-size-1); }
.table th, .table td { padding: var(--space-3) var(--space-4); text-align:left; }
.table th { background: var(--c-bg-alt); font-weight:500; font-size: var(--font-size-1); position:sticky; top:0; }
.table tbody tr:nth-child(even){ background: rgba(0,0,0,.02); }
[data-theme="dark"] .table tbody tr:nth-child(even){ background: rgba(255,255,255,.02); }

/* 10. Utilities */
.stack { display:flex; flex-direction:column; gap: var(--space-4); }
.row { display:flex; align-items:center; gap: var(--space-4); }
.cluster { display:flex; flex-wrap:wrap; gap: var(--space-3); }
.fill { flex:1; }
.text-dim { color: var(--c-text-dim); }
.text-accent { color: var(--c-accent); }
.badge { font-size: var(--font-size-0); padding: 2px 6px; border-radius: var(--radius-xs); background: var(--c-accent-soft); color: var(--c-accent); }
.sep { height:1px; background: var(--c-border); margin: var(--space-6) 0; }
.ellipsis { white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.is-hidden { display:none !important; }
.sr-only { position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0 0 0 0); white-space:nowrap; border:0; }

/* 11. Toasts */
.toast-region { position:fixed; bottom: var(--space-6); right: var(--space-6); display:flex; flex-direction:column; gap: var(--space-3); z-index: var(--layer-toast); max-width: 340px; }
.toast { background: var(--c-bg-elev); border:1px solid var(--c-border); padding: var(--space-4) var(--space-5); border-radius: var(--radius-sm); font-size: var(--font-size-1); box-shadow:0 4px 14px -4px rgba(var(--c-shadow) / 0.35); display:flex; gap: var(--space-3); align-items:flex-start; }
.toast.ok { border-color: var(--c-ok); }
.toast.warn { border-color: var(--c-warn); }
.toast.danger { border-color: var(--c-danger); }

/* 12. Animations */
@media (prefers-reduced-motion: no-preference){
  .fade-in { animation: fade-in var(--dur) var(--easing-standard); }
  @keyframes fade-in { from { opacity:0; transform:translateY(4px); } to { opacity:1; transform:translateY(0); } }
}

/* 13. Theme transitions (opt-in) */
.theme-transition * { transition: background var(--dur-slow) var(--easing-standard), color var(--dur-slow) var(--easing-standard), border-color var(--dur-slow) var(--easing-standard); }

/* 14. Route placeholder styles */
.route-heading { margin-top:0; }
.placeholder { padding: var(--space-6); border:1px dashed var(--c-border); border-radius: var(--radius-sm); background: var(--c-bg-alt); font-size: var(--font-size-1); }
